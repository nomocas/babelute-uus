(function(e,n){typeof exports==="object"&&typeof module!=="undefined"?module.exports=n():typeof define==="function"&&define.amd?define(n):e.__MY__PROJECT__=n()})(this,function(){"use strict";var e=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=function(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}};var t=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(n,t,r){if(t)e(n.prototype,t);if(r)e(n,r);return n}}();var r=function(e,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof n)}e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(n)Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n};var i=function(e,n){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n&&(typeof n==="object"||typeof n==="function")?n:e};var o=function e(t,r,i){n(this,e);this.lexicon=t;this.name=r;this.args=i};var u=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;n(this,e);this._lexems=t||[];this.__babelute__=true}t(e,[{key:"_append",value:function e(n,t,r){this._lexems.push(new o(n,t,r));return this}},{key:"_if",value:function e(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(n)this._lexems=this._lexems.concat(t._lexems);else if(r)this._lexems=this._lexems.concat(r._lexems);return this}},{key:"_each",value:function e(n,t){var r=this;n.forEach(function(e,n){var i=t(e,n);r._lexems.push.apply(r._lexems,i._lexems)});return this}},{key:"_use",value:function e(n){}},{key:"_lexicon",value:function e(n){}}],[{key:"extends",value:function e(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=function e(t){n.call(this,t)};r.prototype=Object.create(n.prototype);r.prototype.constructor=r;for(var i in t){r.prototype[i]=t[i]}return r}}]);return e}();function a(e){return JSON.parse(e,function(e,n){if(n&&n.__babelute__)return new u(n._lexems.map(function(e){return new o(e.lexicon,e.name,e.args)}));return n})}var l=function(e){r(u,e);function u(e){n(this,u);var t=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));t.__first_level_babelute__=true;return t}t(u,null,[{key:"getFirstLevelMethod",value:function e(n,t){return function(){this._lexems.push(new o(n,t,arguments));return this}}}]);return u}(u);var s=function(){function e(){n(this,e)}t(e,null,[{key:"extends",value:function e(n){var t=function e(){};t.prototype=Object.create(n.prototype);t.prototype.constructor=t;return t}}]);return e}();function c(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var t=e.Initializer=n?s.extends(n):s;e.initializer=new t;e.initializer._empty=function(){return new e};e.initializer.BabeluteClass=e;Object.keys(e).forEach(function(e){f(t,e)});return e.initializer}function f(e,n){e.prototype[n]=function(){return this.BabeluteClass.prototype[n].apply(new this.BabeluteClass,arguments)}}var h={};var p=function(){function e(t){var r=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;n(this,e);this.parent=i;i=i||{};this.name=t;this.Atomic=g(i.Atomic||u);this.FirstLevel=g(i.FirstLevel||l);this.SecondLevel=u.extends(i.SecondLevel||u);this.secondLevel=new this.SecondLevel;if(i.Atomic)Object.keys(i.Atomic.initializer).forEach(function(e){f(r.Atomic.Initializer,e);f(r.FirstLevel.Initializer,e)})}t(e,[{key:"addAtoms",value:function e(n){var t=this;n.forEach(function(e){return v(t,e)});return this}},{key:"addCompounds",value:function e(n){var t=this;var r=n(this.Atomic.initializer);for(var i in r){this.Atomic.prototype[i]=r[i]}var o=n(this.FirstLevel.initializer);for(var u in o){this.SecondLevel.prototype[u]=o[u]}Object.keys(r).forEach(function(e){t.FirstLevel.prototype[e]=l.getFirstLevelMethod(t.name,e);f(t.Atomic.Initializer,e);f(t.FirstLevel.Initializer,e)});return this}},{key:"addAliases",value:function e(n){var t=this;Object.keys(n).forEach(function(e){t.Atomic.prototype[e]=t.FirstLevel.prototype[e]=t.SecondLevel.prototype[e]=n[e];f(t.Atomic.Initializer,e);f(t.FirstLevel.Initializer,e)});return this}},{key:"use",value:function e(n,t,r,i){var o=i?this.FirstLevel.instance:this.Atomic.instance;if(!o[t])throw new Error("Babelute ("+this.name+") : method not found : "+t);o[t].apply(n,r)}},{key:"translateToAtomic",value:function e(n,t){return b(n,this.Atomic,t||this.targets)}},{key:"translateToFirstLevel",value:function e(n,t){return b(n,this.FirstLevel,t||this.targets)}},{key:"initializer",value:function e(n){return n?this.FirstLevel.initializer:this.Atomic.initializer}}]);return e}();function v(e,n){e.Atomic.prototype[n]=e.FirstLevel.prototype[n]=e.SecondLevel.prototype[n]=l.getFirstLevelMethod(e.name,n);f(e.Atomic.Initializer,n);f(e.FirstLevel.Initializer,n)}function g(e){var n=u.extends(e);c(n,e.Initializer);n.instance=new n;return n}function m(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return new p(e,n)}function d(e){var n=h[e];if(!n)throw new Error("lexicon not found : "+e);return n}function _(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;h[n||e.name]=e}u.prototype._lexicon=function(e){return new(d(e).Atomic)(this._lexems)};l.prototype._lexicon=function(e){return new(d(e).FirstLevel)(this._lexems)};u.prototype._use=function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++){t[r-1]=arguments[r]}return e?y(this,e,t,false):this};l.prototype._use=function(e){return e?y(this,e,[].slice.call(arguments,1),true):this};function y(e,n,t,r){if(typeof n==="string"){var i=n.split(":"),o=i.lexiconName,u=i.methodName;d(o).use(e,u,t,r)}else if(n.__babelute__)e._lexems=e._lexems.concat(n._lexems);return e}function b(e,n,t){var r=new n;e._lexems.forEach(function(e){if(t&&!t[e.lexicon]||this[e.name])this._lexems.push(new o(e.lexicon,e.name,e.args));else this[e.name].apply(this,e.args.map(function(e){if(!e||!e.__babelute__)return e;return b(e,n,t)}))},r);return r}function x(e,n){if(e)return new(d(e)[n?"FirstLevel":"Atomic"]);else if(n)return new l;return new u}function k(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;n=n||d(e.lexicon);return n.secondLevel[e.name].apply(new n.FirstLevel,e.args)}function w(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;n=n||d(e.lexicon);return n.Atomic.prototype[e.name].apply(new n.Atomic,e.args)}function L(e,n){if(!n)return d(e).Atomic.initializer;return d(e).FirstLevel.initializer}var O=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n(this,e);this._targets=t;if(r)this.addPragmas(r)}t(e,[{key:"addPragmas",value:function e(n){for(var t in n){this[t]=n[t]}}},{key:"$output",value:function e(){throw new Error("pragmatics.$output should be implemented in subclasses")}}]);return e}();function z(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new O(e,n)}var F=function(e){r(o,e);function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;n(this,o);return i(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t))}t(o,[{key:"each",value:function e(n,t,r){var i=t[0],o=t[1];if(i.length)for(var u=0,a=i.length,l,s;u<a;++u){l=i[u];s=o(l,u);if(s)this.$output(n,s,r)}}},{key:"if",value:function e(n,t,r){if(t[0])this.$output(n,t[1],r);else if(t[2])this.$output(n,t[2],r)}},{key:"$output",value:function e(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;for(var i=0,o,u=t._lexems.length;i<u;++i){o=t._lexems[i];if(this._targets[o.lexicon]&&this[o.name])this[o.name](n,o.args,r)}return n}}]);return o}(O);function j(e,n){var t=function n(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;e.Atomic.call(this);this._subject=t;this._percolator=r};t.prototype=Object.create(e.Atomic.prototype);t.prototype.constructor=t;t.prototype._lexicon=null;t.prototype._append=function(e,t,r){if((!n._targets||n._targets[e])&&n[t])n[t](this._subject,r,this._percolator);return this};return function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return new t(e,n)}}function A(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return new F(e,n)}var S={createLexicon:m,createPragmatics:z,createFacadeInitializer:j,createFacadePragmatics:A,init:x,initializer:L,getLexicon:d,registerLexicon:_,developOneLevel:k,developToAtoms:w,fromJSON:a,Babelute:u,Lexem:o,Pragmatics:O,FacadePragmatics:F};function E(e,n,t){if(t)e.lexicScope[e.lexicScope.length-1]=n;else e.lexicScope.push(n);e.currentLexic=n;return true}function M(e){e.lexicScope.pop();e.currentLexic=e.lexicScope[e.lexicScope.length-1]}function P(e){var n=e.length;var t=n;while(t&&e[t-1]===undefined){t--}if(t<n)e.splice(t,n-t);return e}function I(e,n){var t=[];var r=0,i=void 0,o=void 0,u=false,a=void 0;for(var l=0,s=e.length;l<s;++l){i=e[l];if(i.lexicon!==n.currentLexic){a="#"+i.lexicon+":";t.push(a);u=E(n,i.lexicon,u)}if(i.args){o=N(P(i.args),n);if((i.args.length>1||i.args[0]&&i.args[0].__babelute__)&&o.length>n.maxLength)a=i.name+"(\n\t"+o.replace(/\n/g,function(e){return e+"\t"})+"\n)";else a=i.name+"("+o+")"}else a=i.name+"()";t.push(a);r+=a.length}if(u)M(n);r+=e.length-1;return t.join(r>n.maxLength?"\n":" ")}function T(e,n){var t=e.length;if(!t)return"[]";var r=N(e,n),i=t>1&&r.length>n.maxLength;if(i)return"[\n\t"+r.replace(/\n/g,function(e){return e+"\t"})+"\n]";return"["+r+"]"}function N(e,n){var t=e.length;if(!t)return"";var r=[];var i=void 0,o=0;for(var u=0;u<t;++u){i=C(e[u],n);r.push(i);o+=i.length}o+=t-1;return r.join(o>n.maxLength?",\n":", ")}function R(e,n){var t=Object.keys(e);var r=B(e,t,n);if(t.length>1&&r.length>n.maxLength){return"{\n\t"+r.replace(/\n/g,function(e){return e+"\t"})+"\n}"}return"{ "+r+" }"}function B(e,n,t){var r=[];var i=void 0,o=0,u=void 0;for(var a=0,l=n.length;a<l;++a){u=n[a];i=C(e[u],t);o+=i.length;r.push(u+": "+i)}o+=n.length-1;return o>t.maxLength?r.join(",\n"):r.join(", ")}function C(n,t){if(!n)return n+"";var r=void 0;switch(typeof n==="undefined"?"undefined":e(n)){case"object":if(n.__babelute__)return U(n,t);if(n.forEach)return t.beautify?T(n,t):"["+$(n,t)+"]";return t.beautify?R(n,t):J(n,t);case"string":return JSON.stringify(n);case"function":r=(n+"").replace(/anonymous/,"").replace(/\n\/\*\*\//,"");return t.beautify?r:r.replace(/`[^`]*`|\n\s*/g,function(e){return e[0]==="`"?e:" "});default:return n+""}}function $(e,n){if(!e.length)return"";var t="";for(var r=0,i=e.length;r<i;++r){t+=(r?",":"")+C(e[r],n)}return t}function J(e,n){var t=Object.keys(e);var r="";for(var i=0,o=t.length,u;i<o;++i){u=t[i];r+=(i?",":"")+u+":"+C(e[u],n)}return"{"+r+"}"}function U(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n.lexicScope=n.lexicScope||[];if(n.beautify){n.maxLength=n.maxLength||20;return I(e._lexems,n)}var t=e._lexems;var r="",i=void 0,o=false;for(var u=0,a=t.length;u<a;++u){i=t[u];if(i.lexicon!==n.currentLexic){r+="#"+i.lexicon+":";o=E(n,i.lexicon,o)}r+=i.name+"("+(i.args?$(P(i.args),n):"")+")"}if(o)M(n);return r}var q=function e(n,t){if(!(n instanceof t)){throw new TypeError("Cannot call a class as a function")}};var V=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(n,t,r){if(t)e(n.prototype,t);if(r)e(n,r);return n}}();var Y=function(){function e(n,t){q(this,e);this.rules=n;this.defaultRule=t}V(e,[{key:"getRule",value:function e(n){var t=this.rules[n];if(!t)throw new Error("elenpi parser : rules not found : "+n);return t}},{key:"parse",value:function n(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;o=o||{};o.parser=this;o.string=t;r=r||this.getRule(this.defaultRule);e.exec(r,i,o);if(!o.error&&o.string.length){o.error=true;o.errorMessage="string wasn't parsed entierly"}if(o.error){var u=t.length-o.string.length,a=D(t,u);throw new Error("Parsing failed : "+(o.errorMessage||"no rules matched")+" : (line:"+a.line+" , col:"+a.col+") near :\n",t.substring(u,u+50))}return i}}],[{key:"exec",value:function n(t,r,i){if(i.error)return;if(typeof t==="string")t=i.parser.getRule(t);var o=t._queue;for(var u=0,a,l=o.length;u<l;++u){a=o[u];if(a.__elenpi__)e.exec(a,r,i);else a(i,r);if(i.error)break}}}]);return e}();function D(e,n){var t=e.split(/\r|\n/),r=t.length;var i=0,o=0,u=void 0,a=void 0;while(i<r){u=t[i];a=u.length;if(n<=o+a)break;o+=a;i++}return{line:i+1,col:n-o}}var G=/^\s+/;var H=Y.exec;var K=function(){function e(){q(this,e);this._queue=[];this.__elenpi__=true}V(e,[{key:"done",value:function e(n){this._queue.push(n);return this}},{key:"use",value:function n(t){var r=[].slice.call(arguments,1);return this.done(function(n,i){if(typeof t==="string")t=n.parser.getRule(t);if(t.__elenpi__){H(t,i,n)}else{var o=new e;t.apply(o,r);H(o,i,n)}})}},{key:"terminal",value:function e(n,t){return this.done(function(e,r){if(!e.string.length){e.error=true;return}var i=n.exec(e.string);if(i){e.string=e.string.substring(i[0].length);if(t){if(typeof t==="string")r[t]=i[0];else t(e,r,i)}}else e.error=true})}},{key:"char",value:function e(n){return this.done(function(e){if(!e.string.length||e.string[0]!==n)e.error=true;else e.string=e.string.substring(1)})}},{key:"xOrMore",value:function e(n){var t=typeof n==="string"||n.__elenpi__?{rule:n}:n;t.minimum=t.minimum||0;t.maximum=t.maximum||Infinity;return this.done(function(e,n){if(t.minimum&&!e.string.length){e.error=true;return}var r=t.rule,i=t.pushTo,o=typeof i==="string",u=t.as,a=t.separator;var l=0,s=void 0,c=void 0,f=void 0;while(e.string.length&&l<t.maximum){c=u?u(e,n):i?{}:n;s=e.string.length;H(r,c,e);f=e.string.length;if(e.error){if(s===f)e.error=false;break}l++;if(!c.skip&&i)if(o){n[i]=n[i]||[];n[i].push(c)}else i(e,n,c);if(a&&f){s=f;H(a,c,e);if(e.error){if(s===e.string.length)e.error=false;break}}}if(!e.error&&l<t.minimum){e.error=true;e.errorMessage="missing xOrMore item : "+r}})}},{key:"zeroOrMore",value:function e(n){return this.xOrMore(n)}},{key:"oneOrMore",value:function e(n){if(typeof n==="string"||n.__elenpi__)n={rule:n,minimum:1};else n.minimum=1;return this.xOrMore(n)}},{key:"oneOf",value:function e(n){var t=typeof n==="string"||n.__elenpi__?{rules:[].slice.call(arguments)}:n;return this.done(function(e,n){if(!t.optional&&!e.string.length){e.error=true;return}var r=t.rules.length,i=e.string.length;var o=0,u=void 0,a=void 0;while(o<r){u=t.rules[o++];a=t.as?t.as(e,n):t.set?{}:n;H(u,a,e);if(e.error){if(e.string.length===i){e.error=false;continue}}else Q(n,a,t.set,e);return}if(!t.optional)e.error=true})}},{key:"maybeOneOf",value:function e(n){var t=typeof n==="string"||n.__elenpi__?{rules:[].slice.call(arguments)}:n;t.optional=true;return this.oneOf(t)}},{key:"one",value:function e(n){var t=typeof n==="string"||n&&n.__elenpi__?{rule:n}:n;return this.done(function(e,n){if(!t.optional&&!e.string.length){e.error=true;return}var r=t.as?t.as(e,n):t.set?{}:n,i=e.string.length;H(t.rule,r,e);if(!e.error)Q(n,r,t.set,e);else if(t.optional&&e.string.length===i)e.error=false})}},{key:"maybeOne",value:function e(n){var t=typeof n==="string"||n&&n.__elenpi__?{rule:n}:n;t.optional=true;return this.one(t)}},{key:"skip",value:function e(){return this.done(function(e,n){n.skip=true})}},{key:"space",value:function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this.done(function(e){if(!e.string.length){if(n)e.error=true;return}var t=(e.parser.rules.space||G).exec(e.string);if(t)e.string=e.string.substring(t[0].length);else if(n)e.error=true})}},{key:"end",value:function e(){return this.done(function(e){if(e.string.length)e.error=true})}},{key:"error",value:function e(n){return this.done(function(e){e.error=true;e.errorMessage=n})}}]);return e}();function Q(e,n,t,r){if(!n.skip&&t)if(typeof t==="string")e[t]=n;else t(r,e,n)}var W={};Object.getOwnPropertyNames(K.prototype).forEach(function(e){if(typeof K.prototype[e]==="function")W[e]=function(){var n=new K;return n[e].apply(n,arguments)}});K.initializer=W;var X={Rule:K,Parser:Y};var Z=X.Parser;var ee=X.Rule.initializer;var ne=S.init;var te=/\\'/g;var re=/\\"/g;var ie={1:"number",2:"number",3:"number",4:"number",5:"number",6:"number",7:"number",8:"number",9:"number",0:"number","'":"singlestring",'"':"doublestring","{":"object","[":"array"};var oe={babelute:ee.space().oneOrMore({rule:"lexem",separator:ee.terminal(/^\s*/),pushTo:function e(n,t,r){if(r.lexicon&&r.lexicon!==n.currentLexicon){if(t.__swapped__)n.lexicons[n.lexicons.length-1]=r.lexicon;else n.lexicons.push(r.lexicon);n.currentLexicon=r.lexicon;var i=ne(r.lexicon,n.asFirstLevel);i._lexems=t._lexems;t.__swapped__=i}else{t=t.__swapped__||t;le(t,r.name).apply(t,r.args)}}}).done(function(e,n){if(n.__swapped__){e.lexicons.pop();e.currentLexicon=e.lexicons[e.lexicons.length-1];delete n.__swapped__}}).space(),lexem:ee.oneOf(ee.terminal(/^([\w-_]+)\s*\(\s*/,function(e,n,t){n.name=t[1];n.args=[]}).oneOf(ee.terminal(/^\s*\)/),ee.oneOrMore({rule:"value",separator:ee.terminal(/^\s*,\s*/),pushTo:function e(n,t,r){t.args.push(r.value)}}).terminal(/^\s*\)/)),ee.terminal(/^#([\w-_]+):/,function(e,n,t){n.lexicon=t[1]})),value:ee.done(function(e,n){if(!e.string.length){e.error=true;return}Z.exec(ie[e.string[0]]||"wordValue",n,e)}),number:ee.terminal(/^[0-9]+(\.[0-9]+)?/,function(e,n,t){n.value=t[1]?parseFloat(t[0]+t[1],10):parseInt(t[0],10)}),singlestring:ee.terminal(/^'((?:\\'|[^'])*)'/,function(e,n,t){n.value=t[1].replace(te,"'")}),doublestring:ee.terminal(/^"((?:\\"|[^"])*)"/,function(e,n,t){n.value=t[1].replace(re,'"')}),wordValue:ee.oneOf(ee.terminal(/^(?:true|false|null|undefined|NaN|Infinity)/,function(e,n,t){switch(t[0]){case"true":n.value=true;break;case"false":n.value=false;break;case"null":n.value=null;break;case"undefined":n.value=undefined;break;case"NaN":n.value=NaN;break;case"Infinity":n.value=Infinity;break}}),ee.one({rule:"function",set:function e(n,t,r){if(n.acceptFunctions)t.value=Function.apply(null,r.args.concat(r.block))}}),ee.one({rule:"babelute",as:function e(n){return ne(n.currentLexicon,n.asFirstLevel)},set:function e(n,t,r){t.value=r}})),object:ee.one({rule:ee.terminal(/^\{\s*/).zeroOrMore({rule:ee.terminal(/^([\w-_]+)|"([^"]*)"|'([^']*)'/,function(e,n,t){n.key=t[1]}).terminal(/^\s*:\s*/).one("value"),separator:ee.terminal(/^\s*,\s*/),pushTo:function e(n,t,r){t[r.key]=r.value}}).terminal(/^\s*\}/),set:function e(n,t,r){t.value=r}}),array:ee.one({rule:ee.terminal(/^\[\s*/).zeroOrMore({rule:"value",separator:ee.terminal(/^\s*,\s*/),pushTo:function e(n,t,r){t.push(r.value)}}).terminal(/^\s*\]/),as:function e(){return[]},set:function e(n,t,r){t.value=r}}),function:ee.terminal(/^function\s*\(\s*/,function(e,n){n.args=[];n.block=""}).zeroOrMore({rule:ee.terminal(/^[\w-_]+/,"key"),separator:ee.terminal(/^\s*,\s*/),pushTo:function e(n,t,r){t.args.push(r.key)}}).terminal(/^\s*\)\s*\{/).one("scopeBlock").done(function(e,n){n.block=n.block.substring(0,n.block.length-1)}),scopeBlock:ee.oneOf(ee.terminal(/^[^\{\}]*\{/,function(e,n,t){n.block+=t[0]}).oneOrMore("scopeBlock"),ee.terminal(/^[^\}]*\}/,function(e,n,t){n.block+=t[0]}))};var ue=new Z(oe);function ae(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var t={};Object.assign(t,n);t.lexicons=[n.mainLexic];t.currentLexicon=n.mainLexic||null;return ue.parse(e,"babelute",ne(n.mainLexic,t.asFirstLevel),t)}function le(e,n){var t=e[n];if(!t)throw new Error("Babelute : no lexem found in current lexicon ("+(e.__babelute__||"default")+") with :"+n);return t}var se=S;se.fromUUS=ae;se.toUUS=U;return se});